# UR5 pseudo load


## Project Overview

This project aims to control a robotic system using real-time data to conduct tests on bone samples as part of orthopedic studies. The system consists of two main components:

- **Program on the Robot's Polyscope Interface**: This program is responsible for executing the robot's movements based on received commands and processed data.
- **Control and Data Acquisition Program on PC**: Running on a computer, this program collects data from force-torque sensors and adjusts the robot's trajectory in real-time in response to detected forces.

The system enables the simulation of pseudo-static loads on the samples, based on user-defined inputs such as velocity vectors and force thresholds. The collected data are crucial for analyzing the mechanical responses of bones under various load conditions, which is vital for orthopedic research.


## System Requirements

- **Operating System**: The AMTI libraries used in this project are compatible with **Windows**. It is recommended to run this program on a Windows machine for full compatibility and functionality.

- **Virtual Machine**: While it's possible to run the program on a non-Windows system using a virtual machine (VM) configured with Windows, please note that this setup has not been tested. As such, we cannot guarantee full functionality or support for issues that may arise in a virtual machine environment.


## Installation

### Prerequisites

1. **Python 3.x**: Ensure Python is installed on your system.
2. **Libraries**: Required Python libraries include ctypes, matplotlib, numpy, os, sys, and logging. Install them using:
```sh
pip install matplotlib numpy
```
3. **Hardware**: The transducer AMTI MC3A and its Gen5 amplifier, and a the UR5e robot 


### Setup Steps

1. Clone this repository to your local directory:
```sh
git clone https://gitlab.ensta-bretagne.fr/tihamima/ur5-pseudo-load.git
cd ur5-pseudo-load
```
2. Install the required libraries (see above).

## Project Directory Structure

The project directory is organized as follows to facilitate ease of navigation and clarity of purpose:

  - **config/**: Contains configuration files, such as control loop parameters and system settings.
  - **docs/**: Documentation and product Manuals, software and drivers.
  - **interpreter/**: Code for interpreting data or scripts necessary for initial data handling.
  - **lib/**: Library files, including external libraries required by the project.
  - **misc/**: Includes the `__pycache__` directory, which contains compiled Python files to improve loading times.
  - **output/**: Output files generated by the program, including logs, and data visualizations.
  - **rtde/**: Real-Time Data Exchange files and scripts related to communication with the UR5 robot.
  - **src/**: Source code for the main functionality of the project, including scripts for data collection and robot control.
  -**README**

Each directory is organized to maintain a clear separation of different aspects of the project, making it easier to manage and navigate.


## Usage

1. **Power On the Robot**: Ensure that the robot is powered on.
2. **Mount the trasducer**
-Attach the 7615 cable from the platform to the transducer input port.
- Make sure the power switch is set to the off position. Plug the power supply into the Gen 5 and
then into the power source.
- Attach the USB cable from the Gen 5 to the PC.
3. **Connect the robot to your PC**: use an Ethernet cable.
4. **Load the Program on Polyscope**:
Navigate to the spine testing folder on the Polyscope interface.
Select the `spine_testing.urp` file and click to load it.
The robot may restart. If it does, click `Restart` on the Polyscope interface to resume.

5. **Running the Program on PC**
Run the Python Program: On your PC, open a Python environment.
Navigate to src and execute:

```sh
python spine_rtde_one_go.py
```
or 

```sh
python spine_rtde_step_by_step.py
```


## Contributions and Collaboration

This repository is publicly accessible to share our work and findings with the community. However, as it is used in a controlled laboratory environment, it is important to maintain its integrity.


### How to Contribute

If you are interested in contributing or suggesting changes:
1. **Fork the Repository**: You can fork this repository to your own GitLab account.
2. **Make Your Changes**: Implement any changes or additions in your forked repository.
3. **Submit a Merge Request**: Propose your changes by submitting a merge request. Please provide a clear description of your changes and their purpose.

All contributions will be reviewed by the Orthopedic Biomechanics Research Laboratory (OBRL) at Colorado State University (CSU) or by the project lead. We value collaboration and suggestions, but please note that any modifications must be discussed and approved before being merged.

### Contact Information

- **Orthopedic Biomechanics Research Laboratory (OBRL), CSU**: [OBRL contact information or email]
- **Project Lead**: [Main Tihami Ouazzani] - [main.tihami2001@gmail.com]


## License

This project is an open source


## Contact

For questions or suggestions, please contact [main.tihami2001@gmail.com]


## Badges

On some READMEs, you may see small images that convey metadata, such as whether or not all the tests are passing for the project. You can use Shields to add some to your README. Many services also have instructions for adding a badge.


## Visuals

Depending on what you are making, it can be a good idea to include screenshots or even a video (you'll frequently see GIFs rather than actual videos). Tools like ttygif can help, but check out Asciinema for a more sophisticated method.